!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Apxor=t()}(this,(function(){"use strict";function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function t(t){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?e(Object(i),!0).forEach((function(e){s(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):e(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){throw new TypeError('"'+e+'" is read-only')}function u(e){return function(e){if(Array.isArray(e))return c(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}var l={enable:!0,api_root:"https://server.apxor.com/v2/api",auto_track_events:["click","submit"],cookie_expiration:730,name:"",domain:"",cookie_prefix:"_apx_",idle_time_out:1800,ed_t_time:-1,sct_time:108e5,events:{stop:[],action:[]}},d={debug:!1,honorDNT:!1,idle_time_out:1800,client_id:null,session_id:null,plugins:[],version:"ALL",events_upload_time:-1,retry_time:-1,bulk_upload:!0},f="Opera Mini",g="Opera",h="BlackBerry",v="Internet Explorer Mobile",p="Microsoft Edge",_="Facebook Mobile",m="Chrome",w="Chrome iOS",y="UC Browser",b="Firefox iOS",S="Mobile Safari",x="Safari",T="Android Mobile",E="Konqueror",k="Firefox",O="Internet Explorer",I="Mozilla",A=function(e){return e+"id"},N=function(e){return e+"in"},F=function(e){return e+"ver"},P=function(e){return e+"lbgt"},C=o((function e(){i(this,e)}));s(C,"isCookieAvailable",(function(){try{var e=(new Date).getTime()+864e5;document.cookie="cookie_set=cookie_value; expires="+e;for(var t=document.cookie.split(";"),n=0;n<t.length;n++){if(-1!==t[n].indexOf("cookie_set"))return document.cookie="cookie_set=cookie_value; expires=Thu, 01 Jan 1970 00:00:01 GMT;",!0}return!1}catch(e){return!1}})),s(C,"get",(function(e){if(window.document)for(var t=e+"=",n=window.document.cookie.split(";"),i=0;i<n.length;i++){for(var r=n[i];" "===r.charAt(0);)r=r.substring(1,r.length);if(0===r.indexOf(t))return decodeURIComponent(r.substring(t.length,r.length))}return null}));var M,q,D,W,J=function(e){return void 0===e},L=function(e){return null===e},U=function(e){return void 0!==e&&!L(e)},V=function(e){return"function"==typeof e},G=function(e){return"string"==typeof e},R=function(e){return"boolean"==typeof e},Y=function(e){return U(e)&&!L(e)&&!isNaN(e)},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null};V(t)&&(e.removeEventListener("pagehide",t),e.removeEventListener("beforeunload",t),e.removeEventListener("onunload",t))},B=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];V(e.addEventListener)?e.addEventListener(t,n,i):V(e.attachEvent)?e.attachEvent(t,n):e["on"+t]=n},j=function(e,t,n){V(e.removeEventListener)?e.removeEventListener(t,n):V(e.detachEvent)?e.detachEvent(t,n):e["on"+t]=n},H=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=function(e){return e<10?"0"+e:e},i=e.getFullYear()+"-"+n(e.getMonth()+1)+"-"+n(e.getDate())+"T"+n(e.getHours())+":"+n(e.getMinutes())+":"+n(e.getSeconds());return t?i+e.toTimeString().split(" ")[1].replace(/GMT([+|-])(\d{2})(\d{2})/,"$1$2:$3"):i},X=function(){return Date.now()},Z=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)},K=function(){var e=window.navigator,t=(e=void 0===e?{}:e).userAgent,n=void 0===t?"":t;switch(!0){case/Windows Phone/i.test(n)||/WPDesktop/.test(n):return"Windows Phone";case/iPad/.test(n):return"iPad";case/iPod/.test(n):return"iPod Touch";case/iPhone/.test(n):return"iPhone";case/(BlackBerry|PlayBook|BB10)/i.test(n):return"BlackBerry";case/Android/.test(n):return"Android";default:return"Desktop"}},Q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.navigator,i=(n=void 0===n?{}:n).userAgent,r=void 0===i?"":i,o=n.vendor,a=void 0===o?"":o,u=f,c=g,l=h,d=v,A=p,N=_,F=m,P=w,C=y,M=b,q=S,D=x,W=T,J=E,L=k,U=O,V=I,G=function(){switch(!0){case r.includes(" OPR/"):return r.includes("Mini")?u:c;case/(BlackBerry|PlayBook|BB10)/i.test(r):return l;case r.includes("IEMobile")||r.includes("WPDesktop"):return d;case r.includes("FBIOS"):return N;case r.includes("Chrome"):return F;case r.includes("CriOS"):return P;case r.includes("Edge"):return A;case r.includes("UCWEB")||r.includes("UCBrowser"):return C;case r.includes("FxiOS"):return M;case a.includes("Apple"):return r.includes("Mobile")?q:D;case r.includes("Android"):return W;case r.includes("Konqueror"):return J;case r.includes("Firefox"):return L;case r.includes("MSIE")||r.includes("Trident/"):return U;case r.includes("Gecko"):return V;default:return""}},R=G(),Y=function(){var e,t=(e={},s(e,d,/rv:(\d+(\.\d+)?)/),s(e,A,/Edge\/(\d+(\.\d+)?)/),s(e,F,/Chrome\/(\d+(\.\d+)?)/),s(e,P,/CriOS\/(\d+(\.\d+)?)/),s(e,C,/(UCBrowser|UCWEB)\/(\d+(\.\d+)?)/),s(e,D,/Version\/(\d+(\.\d+)?)/),s(e,q,/Version\/(\d+(\.\d+)?)/),s(e,c,/(Opera|OPR)\/(\d+(\.\d+)?)/),s(e,L,/Firefox\/(\d+(\.\d+)?)/),s(e,M,/FxiOS\/(\d+(\.\d+)?)/),s(e,J,/Konqueror:(\d+(\.\d+)?)/),s(e,l,/BlackBerry (\d+(\.\d+)?)/),s(e,W,/android\s(\d+(\.\d+)?)/),s(e,U,/(rv:|MSIE )(\d+(\.\d+)?)/),s(e,V,/rv:(\d+(\.\d+)?)/),e)[R];if(void 0===t)return null;var n=r.match(t);return n?parseFloat(n[n.length-2]):null},z=function(){switch(!0){case/Windows/i.test(r):return/Phone/.test(r)||/WPDesktop/.test(r)?"Windows Phone":"Windows";case/(iPhone|iPad|iPod)/.test(r):return"iOS";case/Android/.test(r):return"Android";case/(BlackBerry|PlayBook|BB10)/i.test(r):return"BlackBerry";case/Mac/i.test(r):return"Mac OS X";case/Linux/.test(r):return"Linux";case/CrOS/.test(r):return"Chrome OS";default:return""}},B=function(){var t=e.screen,n=(t=void 0===t?{width:0,height:0}:t).height,i=t.width,r=e.devicePixelRatio,o=void 0===r?1:r,s=function(e){var t=Math.round(e)*o,n=t%10;return t+(n>0?10:0)-n};return{dimensions:{width:i,height:n},dimensions_in_pixels:{width:s(i),height:s(n)},dpi:o.toString()}},j=Y(),H=K(),X=z();return t(t({},B()),{},{device:H,browser_version:j,browser:R,os:X})},$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.navigator){var t=e.navigator.doNotTrack;return!("1"===t||"yes"===t)}return!0},ee=function(e){var t=e.document.querySelector("title");return U(t)&&U(t.innerText)?t.innerText:"Unknown"},te=function(e){return Y(e)?ne(e/1e3):e},ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;if(!Y(e)||!Y(t))return e;if(t%1!=0)return e;var n=Math.pow(10,t);return Math.round(e*n)/n},ie=function(e){return e instanceof Object},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(ie(e)){var i={};return Object.keys(t({},e)).forEach((function(t){var r=e[t],o=t;G(t)||(o=JSON.stringify(t)),R(r)||Y(r)?ae(i,o,r):G(r)?i[o]=ue(r):Array.isArray(r)?oe(i,o,r,n):ie(r)&&se(i,t,r,n-1)})),i}return{}},oe=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(i<=0)ae(e,t,JSON.stringify(n));else if(Array.isArray(n)){var r=n;if(r.length>0){var o="";R(r[0])?o="b":G(r[0])?o="s":Y(r[0])?o="n":Array.isArray(r[0])?o="a":ie(r[0])&&(o="o");var s=r.length;if(""===o)return void ae(e,t,JSON.stringify(n));for(var a=1;a<s;a++)if("s"===o){if(!G(r[a]))return void ae(e,t,JSON.stringify(n))}else if("b"===o){if(!R(r[a]))return void ae(e,t,JSON.stringify(n))}else if("n"===o){if(!Y(r[a]))return void ae(e,t,JSON.stringify(n))}else if("a"===o){if(!Array.isArray(r[a]))return void ae(e,t,JSON.stringify(n))}else if("o"===o&&!ie(r[a]))return void ae(e,t,JSON.stringify(n));if("o"===o)if(i-1<=0){for(var u=[],c=0;c<s;c++)u.push(JSON.stringify(r[c]));ae(e,t,u)}else for(var l=0;l<s;l++)se(e,t,r[l],i-1);else if("a"===o)for(var d=0;d<s;d++)ae(e,t,JSON.stringify(r[d]));else for(var f=0;f<s;f++)ae(e,t,r[f])}else ae(e,t,[])}},se=function e(n,i,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;o<=0?ae(n,i,JSON.stringify(r)):Object.keys(t({},r)).forEach((function(t){var s=i+"_"+t,a=r[t];U(a)&&(Array.isArray(a)?oe(n,s,a,o-1):ie(a)?e(n,s,a,o-1):ae(n,s,a))}))},ae=function(e,t,n){if(U(t)&&U(n))if(e.hasOwnProperty(t)){var i=e[t],r=i;Array.isArray(i)||((Y(i)&&!Y(n)||R(i)&&!R(n)||G(i)&&!G(n)||ie(i)&&!ie(n))&&(G(i)||(i=JSON.stringify(i)),G(n)||(n=JSON.stringify(n))),(r=[]).push(i)),r.push(n),e[t]=r}else e[t]=n},ue=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:120;return G(e)?e.length>t?e.slice(0,t)+"...":e:void 0},ce=function(e){if(!U(e)&&!G(e))return null;if("object"===n(e)||ie(e))return e;var t=e.replace(/(?:\r\n|\r|\n)/g,"").trim();try{return JSON.parse(t)}catch(e){}return null},le=function(e,t){return U(t)?function(e){var t,n,i,r,o,s,a,u,c=0,l="";if(!e)return e;do{t=e[c++],n=e[c++],i=e[c++],r=(a=t<<16|n<<8|i)>>12&63,o=a>>6&63,s=63&a,l+=fe.charAt(a>>18&63)+fe.charAt(r)+fe.charAt(o)+fe.charAt(s)}while(c<e.length);return((u=e.length%3)?l.slice(0,u-3):l)+"===".slice(u||3)}(t=function(e,t){return Array.from(t).map((function(t,n){return t.charCodeAt(0)^ge(e,n)}))}(e,t)):null},de=function(e,t){return function(e,t){return Array.from(t).map((function(t,n){return String.fromCharCode(t^ge(e,n))})).join("")}(e,t=function(e){var t,n,i,r,o,s,a,u,c=0,l=[];if(!e)return e;e+="";do{r=fe.indexOf(e.charAt(c++)),o=fe.indexOf(e.charAt(c++)),s=fe.indexOf(e.charAt(c++)),a=fe.indexOf(e.charAt(c++)),t=(u=r<<18|o<<12|s<<6|a)>>16&255,n=u>>8&255,i=255&u,l.push(t),64!==s&&(l.push(n),64!==a&&l.push(i))}while(c<e.length);return l}(t))},fe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function ge(e,t){return e.charCodeAt(Math.floor(t%e.length))}String.prototype.includes||(String.prototype.includes=function(){return-1!==String.prototype.indexOf.apply(this,arguments)}),Array.from||(Array.from=(M=Object.prototype.toString,q=function(e){return"function"==typeof e||"[object Function]"===M.call(e)},D=Math.pow(2,53)-1,W=function(e){var t=function(e){var t=Number(e);return isNaN(t)?0:0!==t&&isFinite(t)?(t>0?1:-1)*Math.floor(Math.abs(t)):t}(e);return Math.min(Math.max(t,0),D)},function(e){var t=this,n=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var i,r=arguments.length>1?arguments[1]:void 0;if(void 0!==r){if(!q(r))throw new TypeError("Array.from: when provided, the second argument must be a function");arguments.length>2&&(i=arguments[2])}for(var o,s=W(n.length),a=q(t)?Object(new t(s)):new Array(s),u=0;u<s;)o=n[u],a[u]=r?void 0===i?r(o,u):r.call(i,o,u):o,u+=1;return a.length=s,a})),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;var r,o,s=0|t,a=Math.max(s>=0?s:i-Math.abs(s),0);for(;a<i;){if((r=n[a])===(o=e)||"number"==typeof r&&"number"==typeof o&&isNaN(r)&&isNaN(o))return!0;a++}return!1}});var he=["log","debug","info","warn","error"],ve=he.reduce((function(e,t){return e[t]=t,e}),{}),pe=function(e){if(J(e)){var t=function(){return null};e=he.reduce((function(e,n){return e[n]=t,e}),{})}return e},_e=function(){function e(){i(this,e)}return o(e,null,[{key:"enabled",set:function(t){e._enabled=t}},{key:"level",set:function(t){e._level=t}},{key:"console",set:function(t){e._console=pe(t)}}]),e}();s(_e,"_console",pe()),s(_e,"_enabled",!1),s(_e,"_level","error"),s(_e,"_render",(function(e){return function(){var t=he.indexOf(e)>=he.indexOf(_e._level);if(_e._enabled&&t){for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];_e._console[e].apply(_e._console,i)}}})),s(_e,"log",_e._render(ve.log)),s(_e,"info",_e._render(ve.info)),s(_e,"debug",_e._render(ve.debug)),s(_e,"warn",_e._render(ve.warn)),s(_e,"error",_e._render(ve.error));var me="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var we=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){!function(t){function n(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function i(e,t,i,r,o,s){return n((a=n(n(t,e),n(r,s)))<<(u=o)|a>>>32-u,i);var a,u}function r(e,t,n,r,o,s,a){return i(t&n|~t&r,e,t,o,s,a)}function o(e,t,n,r,o,s,a){return i(t&r|n&~r,e,t,o,s,a)}function s(e,t,n,r,o,s,a){return i(t^n^r,e,t,o,s,a)}function a(e,t,n,r,o,s,a){return i(n^(t|~r),e,t,o,s,a)}function u(e,t){var i,u,c,l,d;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var f=1732584193,g=-271733879,h=-1732584194,v=271733878;for(i=0;i<e.length;i+=16)u=f,c=g,l=h,d=v,f=r(f,g,h,v,e[i],7,-680876936),v=r(v,f,g,h,e[i+1],12,-389564586),h=r(h,v,f,g,e[i+2],17,606105819),g=r(g,h,v,f,e[i+3],22,-1044525330),f=r(f,g,h,v,e[i+4],7,-176418897),v=r(v,f,g,h,e[i+5],12,1200080426),h=r(h,v,f,g,e[i+6],17,-1473231341),g=r(g,h,v,f,e[i+7],22,-45705983),f=r(f,g,h,v,e[i+8],7,1770035416),v=r(v,f,g,h,e[i+9],12,-1958414417),h=r(h,v,f,g,e[i+10],17,-42063),g=r(g,h,v,f,e[i+11],22,-1990404162),f=r(f,g,h,v,e[i+12],7,1804603682),v=r(v,f,g,h,e[i+13],12,-40341101),h=r(h,v,f,g,e[i+14],17,-1502002290),f=o(f,g=r(g,h,v,f,e[i+15],22,1236535329),h,v,e[i+1],5,-165796510),v=o(v,f,g,h,e[i+6],9,-1069501632),h=o(h,v,f,g,e[i+11],14,643717713),g=o(g,h,v,f,e[i],20,-373897302),f=o(f,g,h,v,e[i+5],5,-701558691),v=o(v,f,g,h,e[i+10],9,38016083),h=o(h,v,f,g,e[i+15],14,-660478335),g=o(g,h,v,f,e[i+4],20,-405537848),f=o(f,g,h,v,e[i+9],5,568446438),v=o(v,f,g,h,e[i+14],9,-1019803690),h=o(h,v,f,g,e[i+3],14,-187363961),g=o(g,h,v,f,e[i+8],20,1163531501),f=o(f,g,h,v,e[i+13],5,-1444681467),v=o(v,f,g,h,e[i+2],9,-51403784),h=o(h,v,f,g,e[i+7],14,1735328473),f=s(f,g=o(g,h,v,f,e[i+12],20,-1926607734),h,v,e[i+5],4,-378558),v=s(v,f,g,h,e[i+8],11,-2022574463),h=s(h,v,f,g,e[i+11],16,1839030562),g=s(g,h,v,f,e[i+14],23,-35309556),f=s(f,g,h,v,e[i+1],4,-1530992060),v=s(v,f,g,h,e[i+4],11,1272893353),h=s(h,v,f,g,e[i+7],16,-155497632),g=s(g,h,v,f,e[i+10],23,-1094730640),f=s(f,g,h,v,e[i+13],4,681279174),v=s(v,f,g,h,e[i],11,-358537222),h=s(h,v,f,g,e[i+3],16,-722521979),g=s(g,h,v,f,e[i+6],23,76029189),f=s(f,g,h,v,e[i+9],4,-640364487),v=s(v,f,g,h,e[i+12],11,-421815835),h=s(h,v,f,g,e[i+15],16,530742520),f=a(f,g=s(g,h,v,f,e[i+2],23,-995338651),h,v,e[i],6,-198630844),v=a(v,f,g,h,e[i+7],10,1126891415),h=a(h,v,f,g,e[i+14],15,-1416354905),g=a(g,h,v,f,e[i+5],21,-57434055),f=a(f,g,h,v,e[i+12],6,1700485571),v=a(v,f,g,h,e[i+3],10,-1894986606),h=a(h,v,f,g,e[i+10],15,-1051523),g=a(g,h,v,f,e[i+1],21,-2054922799),f=a(f,g,h,v,e[i+8],6,1873313359),v=a(v,f,g,h,e[i+15],10,-30611744),h=a(h,v,f,g,e[i+6],15,-1560198380),g=a(g,h,v,f,e[i+13],21,1309151649),f=a(f,g,h,v,e[i+4],6,-145523070),v=a(v,f,g,h,e[i+11],10,-1120210379),h=a(h,v,f,g,e[i+2],15,718787259),g=a(g,h,v,f,e[i+9],21,-343485551),f=n(f,u),g=n(g,c),h=n(h,l),v=n(v,d);return[f,g,h,v]}function c(e){var t,n="",i=32*e.length;for(t=0;t<i;t+=8)n+=String.fromCharCode(e[t>>5]>>>t%32&255);return n}function l(e){var t,n=[];for(n[(e.length>>2)-1]=void 0,t=0;t<n.length;t+=1)n[t]=0;var i=8*e.length;for(t=0;t<i;t+=8)n[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return n}function d(e){var t,n,i="";for(n=0;n<e.length;n+=1)t=e.charCodeAt(n),i+="0123456789abcdef".charAt(t>>>4&15)+"0123456789abcdef".charAt(15&t);return i}function f(e){return unescape(encodeURIComponent(e))}function g(e){return function(e){return c(u(l(e),8*e.length))}(f(e))}function h(e,t){return function(e,t){var n,i,r=l(e),o=[],s=[];for(o[15]=s[15]=void 0,r.length>16&&(r=u(r,8*e.length)),n=0;n<16;n+=1)o[n]=909522486^r[n],s[n]=1549556828^r[n];return i=u(o.concat(l(t)),512+8*t.length),c(u(s.concat(i),640))}(f(e),f(t))}function v(e,t,n){return t?n?h(t,e):d(h(t,e)):n?g(e):d(g(e))}e.exports?e.exports=v:t.md5=v}(me)})),ye=o((function e(){var t=this;i(this,e),s(this,"IFcf",(function(e,n){if(t._listeners.hasOwnProperty(e))for(var i=t._listeners[e],r=0;r<i.length;r++){(0,i[r])(n)}})),s(this,"registerForEvent",(function(e,n){var i;V(n)&&((i=t._listeners[e]?t._listeners[e]:[]).push(n),t._listeners[e]=i)})),s(this,"unregisterFromEvent",(function(e,n){if(t._listeners[e]){for(var i=t._listeners[e],r=[],o=0;o<i.length;o++){var s=i[o];s!==n&&r.push(s)}t._listeners[e]=r}})),s(this,"Wmja",(function(){t._listeners={}})),this._listeners={}})),be=function(e,t){return{name:"visible"===e?"FOREGROUND":"BACKGROUND",time:Y(t)?ne(t):0}},Se=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(G(e)&&ie(t))return{name:e,additional_info:t,category:U(n)&&G(n)?n:void 0,time:Y(i)?ne(i):0}},xe=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return{navigation_id:e,name:t,duration:Y(n)?ne(n):0,transition_time:Y(i)?ne(i):0}},Te={navigation_events:[],app_events:[],system_events:[],user_events:[],chunk_attributes:{},user_attributes:{},session_attributes:{}},Ee=function(e){return{sdk_version:176,config_id:"apx",tick_interval:1,chunk_retry_window:1800,sdk_start_time:e}},ke=function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return{sdk_info:Ee(e),session_info:{id:n,launch_time:e,launch_time_string:H(new Date(e)),startup_time:0,is_background:!1,is_first_session:!1,duration:0,total_duration:0,process_name:"",is_fatal:!1,launch_type:"normal"},app_info:{app_name:"",app_version:"ALL",bundle_id:"",installation_time:X(),app_mode:"production"},device_info:Q(window),chunk_meta:{id:n+":"+i,number:i,reporting_times:[]},chunk_details:t(t({},Te),{},{user_attributes:{},session_attributes:{}})}},Oe=o((function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};i(this,e),s(this,"LQaf",(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=t.window,a=(s.fetch,s.XMLHttpRequest);_e.debug("POST request with data"),a?t.zEIO(e,n,i,r,o):(_e.error("Unknown browser..."),i(403,"Unknown")),_e.debug("sent request to server")})),s(this,"get",(function(e,n){var i=t.window,r=i.fetch,o=i.XMLHttpRequest;if(r)r(e).then((function(e){try{if(e.ok)return e.json()}catch(e){}return null})).then((function(e){U(e)?n(200,e):n(500,{})})).catch((function(e){return n(500,e)}));else if(o){var s=new o;s.open("GET",t.url,!0),s.onreadystatechange=function(){4===s.readyState&&n(s.status,s.responseText)},s.send()}else _e.error("Unknown browser..."),n(403,"Unknown");_e.debug("sent request to server")})),s(this,"zEIO",(function(e,n,i,r,o){var s=new XMLHttpRequest;s.onerror=function(){i(500,null)},s.open("POST",e,o),s.setRequestHeader("Content-Type","application/json; charset=UTF-8"),Object.keys(null!=r?r:{}).forEach((function(e){s.setRequestHeader(e,r[e])})),s.onreadystatechange=function(){if(4===s.readyState){var r=s.responseText,o=r.match(/Failed to execute 'send' on 'XMLHttpRequest'/);if(!(L(o)||J(o)||L(o[0])||J(o[0])||"Failed to execute 'send' on 'XMLHttpRequest'"!==o[0]))return void t.zEIO(e,n,i,!0);try{r=JSON.parse(r)}catch(e){}i(s.status,r)}};try{s.send(JSON.stringify(n))}catch(e){i(500,e)}})),this.window=n})),Ie="/sdk/<app-id>/enabled-status?platform=web&version=176",Ae=l.api_root,Ne=function(e,t){return Ae+e.replace("<app-id>",t)},Fe=o((function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),s(this,"EWJy",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return null},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null};return function(n,i){_e.debug("XHR Response: [".concat(n,"]")),n<400?i&&"APXOR_STATUS_SUCCESS"===i.apxor_status?i.hasOwnProperty("details")?e(i.details):e(i):200===n?e(i):t(n,i):t&&V(t)&&t(n,i)}})),s(this,"Tzcd",(function(e,t){n.makeGetRequest(n.sdkEnabledStatusAPI,e,t)})),s(this,"ZKdW",(function(e,t){n.makeGetRequest(n.configAPI,e,t)})),s(this,"Qjqd",(function(e,t,i){n.request.LQaf(n.userInfoAPI,e,n.EWJy(t,i),{})})),s(this,"MzsR",(function(e,t,i){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];_e.debug("Posting chunk"),n.request.LQaf(n.chunksAPI,e,n.EWJy(t,i),{},r)})),s(this,"makeGetRequest",(function(e,t,i){n.request.get(e,n.EWJy(t,i))})),s(this,"makePostRequest",(function(e,t,i,r,o){n.request.LQaf(e,t,n.EWJy(r,o),i)})),this.request=new Oe(r),this.configAPI=Ne("/config/<app-id>/web",t),this.chunksAPI=Ne("/<app-id>/chunks",t),this.sdkEnabledStatusAPI=Ne(Ie,t),this.userInfoAPI=Ne("/user?appId=<app-id>",t)})),Pe=o((function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;i(this,e),s(this,"MCul",-1),s(this,"fZQk",0),s(this,"xcHe",(function(){return t.fZQk})),s(this,"zoNi",(function(){return t.MCul})),s(this,"IYvE",(function(){t.MCul=-1,t.fZQk=0})),s(this,"ojfk",(function(e){if("FOREGROUND"===e.name){if(-1!==t.MCul){var n=Math.round(te(Date.now()-t.MCul));t.fZQk+=n;var i=Ue.getInstance().getFromStorage("_apx_sId");if(U(i)&&Ue.getInstance().getSessionId()!==i){Ue.getInstance().IYRA();var r=Ue.getInstance().qXqF(),o=r.total_duration,s=r.duration;t.fZQk=o>s?o-s:0}}}else t.MCul=Date.now(),Ue.getInstance().persistToStorage(P(t._cookiePrefix),t.MCul)})),this._cookiePrefix="apx_",Ue.getInstance().registerForEvent("SYSTEM_EVENT",this._onSystemEvent),this.fZQk=n,Ue.getInstance().persistToStorage(P(this._cookiePrefix),this.MCul)})),Ce=function(){function e(t){var n=this;i(this,e),s(this,"PNil",!1),s(this,"Rzth",(function(e){var t=!0;try{window[e]?(window[e].setItem("_apx_","apx"),"apx"!==window[e].getItem("_apx_")&&(t=!1),window[e].removeItem("_apx_")):t=!1}catch(e){t=!1}return t||_e.error("localStorage not supported..!"),t})),s(this,"FGaB",(function(e){_e.error("".concat(n.storageType," Error: "),e)})),s(this,"get",(function(e){try{return n.storage.getItem(e)}catch(e){}return null})),s(this,"PfDL",(function(e){try{return JSON.parse(n.storage.getItem(e))}catch(e){}return null})),s(this,"set",(function(e,t){try{n.storage.setItem(e,t)}catch(e){}})),s(this,"bBFN",(function(e){try{n.storage.removeItem(e)}catch(e){}})),s(this,"clear",(function(){try{n.storage.removeItem("_apx_config"),n.storage.removeItem("_apx_ua"),n.storage.removeItem("_apx_lEt"),n.storage.removeItem("_apx_sId"),n.storage.removeItem("_apx_sc"),n.storage.removeItem(A("apx_")),n.storage.removeItem(N("apx_")),n.storage.removeItem(F("apx_")),n.storage.removeItem(P("apx_"))}catch(e){}})),this.PNil=this.Rzth(t),this.PNil?(this.storage=window[t],this.storageType=t):(this.storageType=t,this.storage={length:0,getItem:function(e){},setItem:function(e,t){},removeItem:function(e){},clear:function(){},get:function(e){},set:function(e,t){},remove:function(e){},getParsed:function(e){}})}return o(e,[{key:"isStorageAvailable",value:function(){return this.PNil}}]),e}();var Me=function(){function e(n){var r=this;i(this,e),s(this,"dUXt",""),s(this,"LNwP",(function(e,t){if(t)Array.isArray(e)||(e=[e]),r.storage.set("_apx_od",le(r.dUXt,JSON.stringify(e)));else{var n=r.rZyC();r.storage.set("_apx_od",le(r.dUXt,JSON.stringify([].concat(n,e))))}})),s(this,"rZyC",(function(){var e,t=r.storage.get("_apx_od"),n=ce(t);if(null===n)try{t=JSON.parse(de(r.dUXt,t))}catch(e){t=null}else t=n;return null!==(e=t)&&void 0!==e?e:[]})),s(this,"lOip",(function(){r.storage.bBFN("_apx_od")})),s(this,"SlKT",(function(){_e.debug("Cleaning existing session data"),r.storage.bBFN("_apx_cd")})),s(this,"OCsq",(function(e){r.storage.set("_apx_cd",le(r.dUXt,JSON.stringify(e)))})),s(this,"PmqV",(function(e,n){var i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3600,s=r.storage.get("_apx_cd"),a=Number(r.storage.get("_apx_lEt"));if(Y(a)&&a>0){var u=Date.now();if(Math.round(te(u-Number(a)))>o){var c=r.getItem("_apx_use",!0);if(U(c)&&(s=r.getItem("_apx_cd",!0),U(s))){var l=s,d=l.chunk_details,f=l.chunk_meta,g=l.session_info,h=t(t({},f),{},{id:g.id+":"+(f.number+1),number:f.number+1,reporting_times:[]});d=t(t({},d),c),s=t(t({},s),{},{chunk_meta:t({},h),chunk_details:t({},d)}),r.LNwP(s,!1),r.gUBE("_apx_use",null)}r.gUBE("_apx_lEt",Date.now()),s=null}}var v=!1,p=ce(s);if(null===p)try{s=JSON.parse(de(r.dUXt,s))}catch(e){s=null}else s=p;if(U(s)){v=!0,_e.debug("Found session data");var _=s,m=_.chunk_meta.number,w=_.session_info.id,y=m+1;i=t(t({},s),{},{chunk_meta:t(t({},s.chunk_meta),{},{number:y,id:w+":"+y}),chunk_details:t(t({},s.chunk_details),Te)})}else i=ke(e,n);return{is_new_session:!v,chunk:i}})),s(this,"HMuI",(function(){var e,t=r.storage.get("_apx_config");if(U(t)&&null===(t=ce(t)))try{t=JSON.parse(de(r.dUXt,data))}catch(e){t=null}return null!==(e=t)&&void 0!==e?e:l})),s(this,"ofpX",(function(e){r.storage.set("_apx_config",le(r.dUXt,JSON.stringify(e)))})),s(this,"xHPu",(function(e){r.storage.set(A("apx_"),e,730)})),s(this,"MPVl",(function(e){var t=null;try{t=r.storage.get(A(e))}catch(e){_e.debug("Can not get user id from storage:"+e)}return t})),s(this,"iejo",(function(e){r.storage.set(N("apx_"),e,730)})),s(this,"qMkC",(function(e){var t=r.storage.get(N("apx_"));if(_e.debug("Stored installation time",t),U(t))return Number(t);if(C.isCookieAvailable()){var n=C.get(N("apx_"));if(U(n))return r.storage.set(N("apx_"),n),Number(n)}return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=!1,i=function(){n||(n=!0,e())};setTimeout(i,t)}((function(){return r.iejo(e)})),e})),s(this,"xvYp",(function(e){return r.storage.set(F("apx_"),e)})),s(this,"rSvR",(function(){var e=r.storage.get(F("apx_"));if(!U(e)&&C.isCookieAvailable()){var t=C.get(F("apx_"));if(U(t))return r.storage.set(F("apx_"),t),t}return e})),s(this,"gUBE",(function(e,t){r.storage.set(e,t)})),s(this,"getItem",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=r.storage.get(e);if(t){var i=ce(n);if(null===i)try{n=JSON.parse(de(r.dUXt,n))}catch(e){n=null}else n=i}return n})),s(this,"ZYsm",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=r.getItem(e,n);return null!=i?i:t})),s(this,"ToAb",(function(e){r.storage.clear(e)})),this.dUXt=n,this.storage=new Ce("localStorage"),_e.debug("DataManager initialized")}return o(e,[{key:"getltCount",value:function(e){try{var t=this.storage.get("_apx_lt_count");if(t){var n=de(this.dUXt,t);return JSON.parse(n)[e.replace("'","").replace("’","")]}}catch(t){_e.error("Error gettting the LT Count for the event:"+e)}return 0}},{key:"isStorageAvailable",value:function(){return this.storage.isStorageAvailable()}}]),e}(),qe=["scroll","touchmove"],De=o((function e(){var t=this,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];i(this,e),s(this,"PwKK",!0),s(this,"PBFZ",(function(){_e.debug("Registering for System Event ","visibilitychange");var e=function(e){var n=Ue.getInstance().getTime(),i="visible"===window.document.visibilityState,r=be(window.document.visibilityState,n);if(i?t.MCul>-1&&(Ue.instance.BYVn((function(){Ue.instance.FhCd(!1),Ue.getInstance().dispatchEvent("SYSTEM_EVENT",r)})),r.background_time=ne(te(Date.now()-t.MCul))):(Ue.instance.FhCd(!0),Ue.instance.CkzT(),t.MCul=Date.now(),Ue.getInstance().dispatchEvent("SYSTEM_EVENT",r)),i){var o=Ue.getInstance().getUserAttributes().apx_browser;!t.PwKK||-1!==o.indexOf("Mobile Safari")&&-1!==o.indexOf("Safari")||(t.PwKK=!1)}else Ue.getInstance().pFfa()};B(document,"visibilitychange",e),t._handlers.push(t.XYvV("visibilitychange",e))})),s(this,"uniM",(function(){t._handlers.forEach((function(e){var t=e.type,n=e.handler;_e.debug("Unregistering from event type ",t),qe.includes(t)?j(window.document,t,n):j(document,t,n)})),t._handlers=[],t._scrollEvents=[],t._scrollData={}})),s(this,"oQwE",(function(){return[]})),s(this,"XYvV",(function(e,t){return{type:e,handler:t}})),this.MCul=-1,this._handlers=[],this._scrollEvents=[],this._scrollData={},this.PwKK=n,this.PBFZ()})),We=o((function e(){var t=this;i(this,e),s(this,"dhhQ",!0),s(this,"dUXt",""),s(this,"initialize",(function(e,n){t.dUXt=n;var i=e.validate_hash,r=void 0===i||i,o=e.cs_ht_time,s=void 0===o?-1:o;t.dhhQ=r,t.configsHashThrottleTime=s,Ue.getInstance().registerForEvent("APP_EVENT",(function(e){t.kkBz(e.name)}))})),s(this,"fetchConfiguration",(function(e,n,i,r){if(V(r))if(t.dhhQ){var o=Ue.getInstance();if(t.configsHashThrottleTime>0){var s=o.NVfM(e+"_lcfht",-1);if(s>0)if(Math.abs(Date.now()-s)<t.configsHashThrottleTime)return void t.nnfZ(e,r)}o.persistToStorage(e+"_lcfht",Date.now());var a=t.TVYO(),u={pid_mid:[]},c=a[e];if(U(c)){Array.isArray(c)||(c=[c]);var l=[];c.forEach((function(e){var t=e.pid+"_"+e.mid;l.includes(t)||l.push(t)})),l.length>0&&(u.pid_mid=l.join(","))}else c=[];var d=o.getUserAttributes().custom_user_id,f=void 0===d?null:d;f&&(n+="&customerId="+f),o.makePostRequest(n,u,{"Content-Type":"application/json"},(function(n){t.mlrJ(n,e,i,{configs:c,syncData:a},r)}),(function(){_e.error("Failed to fetch"),r(e,{configs:c})}))}else t.lbkC(e,i,[],r)})),s(this,"TVYO",(function(){var e=Ue.getInstance().getFromStorage("_apx_sc",!0);return U(e)?e:{}})),s(this,"nnfZ",(function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=i;i||(r=t.TVYO());var o=r[e];U(o)&&(Array.isArray(o)||a("configs"),_e.debug("Reading from storage"),n(e,{configs:o}))})),s(this,"mlrJ",(function(e,n,i,r,o){var s=e.pull,a=void 0===s?[]:s,u=e.drop,c=void 0===u?[]:u,l=r.configs,d=r.syncData,f=[];c.length>0||a.length>0?(l.forEach((function(e){c.includes(e.pid)||a.includes(e.pid)||f.push(e)})),d[n]=f,Ue.getInstance().persistToStorage("_apx_sc",le(t.dUXt,JSON.stringify(d)))):(_e.debug("Nothing to delete",n),f=l),a.length>0?(a.forEach((function(e){i+="&pids="+e})),t.lbkC(n,i,f,o)):(_e.debug("Nothing to pull",n),o(n,{configs:f}))})),s(this,"lbkC",(function(e,n,i,r){Ue.getInstance().makeGetRequest(n,(function(n){if(U(n.configs)&&Array.isArray(n.configs)&&0==n.configs.length)r("",{configs:[]});else if(U(n.configs)&&Array.isArray(n.configs)){var o=t.TVYO(),s=[].concat(u(i),u(n.configs));o[e]=s,Ue.getInstance().persistToStorage("_apx_sc",le(t.dUXt,JSON.stringify(o))),r(e,{configs:s})}}),(function(){r(e,{configs:[]})}))})),s(this,"JOzo",(function(e){t.kkBz(e)})),s(this,"kkBz",(function(e){var n=t.TVYO();if(U(n.d)||(n.d={}),JSON.stringify(n.d).length>2097152)_e.error("Reached maximum limit. Can't store further");else{var i=0;U(n.d[e])&&(i=n.d[e]),i+=1,n.d[e]=i,Ue.getInstance().persistToStorage("_apx_sc",le(t.dUXt,JSON.stringify(n)))}})),s(this,"getEventCount",(function(e){var n=t.TVYO();return U(n.d)&&U(n.d[e])?n.d[e]:0}))})),Je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return function(){_e.error("".concat(e,": Apxor SDK not initialised."))}},Le={reportChunkBeforeVisibilityChange:Je("CkzT"),logAppEvent:Je("wqfv"),logClientEvent:Je("logClientEvent"),logPageView:Je("logPageView"),setUserId:Je("setUserId"),setUserProperties:Je("setUserProperties"),setSessionProperties:Je("setSessionProperties"),setAppVersion:Je("setAppVersion"),getClientId:Je("getClientId"),getSessionId:Je("getSessionId"),startSession:Je("startSession"),endSession:Je("endSession"),flattenJSON:Je("flattenJSON"),setRedirectionHandler:Je("setRedirectionHandler")},Ue=function(){function e(){var n=this;return i(this,e),s(this,"WAiI",{}),s(this,"FFWp",!1),s(this,"pKvq",{}),s(this,"LBMk",{}),s(this,"Rzwu",{}),s(this,"uuJo",{}),s(this,"Hmgx",{}),s(this,"xYbV",{}),s(this,"qgGE",{}),s(this,"YrWX",1),s(this,"OQnh",null),s(this,"Dnnw",!1),s(this,"RTfF",!1),s(this,"Tyog",{}),s(this,"wemm",{}),s(this,"QfgX",{}),s(this,"annv",{}),s(this,"lwLZ",3600),s(this,"oGrt",20),s(this,"agHb",-1),s(this,"rZWQ",2e4),s(this,"OlwJ",-1),s(this,"dYLO",10),s(this,"TGzU",!1),s(this,"VhuT",!1),s(this,"flVq",-1),s(this,"UlMO",!1),s(this,"eGkz",!0),s(this,"clientEvents",[]),s(this,"AOQi",[]),s(this,"LWMB",[]),s(this,"qcWL",[]),s(this,"iGSw",{}),s(this,"pnCi",-1),s(this,"PsHe",null),s(this,"kiuN",null),s(this,"AxlI",null),s(this,"axXW",!1),s(this,"isZk",!1),s(this,"OCej",{}),s(this,"ZXmh",""),s(this,"CkzT",(function(){if(n.FFWp){var e=n.qgGE,i=n.LMkQ();i=t(t({},i),{},{chunk_details:e});var r=Apxor.getSiteId(),o=JSON.stringify(i);(null==e?void 0:e.app_events.length)>0&&(n.persistToStorage("_apx_use",le(n.siteId,null)),n.Tyog.LNwP(i,!0),navigator.sendBeacon("https://server.apxor.com/v2/api/".concat(r,"/text-chunks?appId=").concat(r),o))}})),s(this,"initialize",(function(e,t,i,r,o,s){if(!n.FFWp){n.window=r,n.startTime=t,n.siteId=e,n.clientConfig=i||{},n._api=new Fe(n.siteId,n.window),n.Tyog=new Me(n.siteId);try{var a=n.getFromStorage("_apx_lt_count");a&&(n.iGSw=JSON.parse(de(n.siteId,a)))}catch(e){_e.error("LT Count object parsing failed ".concat(e))}var u=new URLSearchParams(location.search),c=u.get("_a")||u.get("_p")||u.get("_x")||u.get("_o")||u.get("_r");if(c){var l=de(n.siteId,c);try{var d=l=JSON.parse(l),f=d.app_id,g=d.expiry,h=Date.now();f===n.siteId&&h<=g&&(document.cookie="_apx_ewc="+btoa("_apx_ew")+"; expires="+new Date(g+6e4).toUTCString(),l.expiry=l.expiry+6e4,n.persistToStorage("_apx_ew",l,!0)),u.delete("_a"),u.delete("_p"),u.delete("_x"),u.delete("_o"),u.delete("_r");var v=location.pathname,p=u.toString();""!==p&&(v+="?"+p),n.window.history.replaceState({},document.title,v)}catch(e){}}else _e.warn("WYSIWYG is disabled");var _=n.Tyog.HMuI();if(n.LWNU(_),!n.config.enable)return n.nuvP("",!0),void s();var m=n.Tyog.ZYsm("_apx_ledt",-1),w=_.ed_t_time;if(w>0&&m>0)if(Math.abs(m-Date.now())<w){if(!n.Tyog.ZYsm("_apx_lef",!0))return void s();var y=n.Tyog.ZYsm("_apx_ch","");return void n.LAVB(y,o,s)}n.persistToStorage("_apx_ledt",Date.now()),n._api.Tzcd((function(e){var t=e.enabled,i=e.hash;n.persistToStorage("_apx_lef",t),t?n.LAVB(i,o,s):(s(),n.FFWp=!1,n.Dnnw=!1,n.zRuo())}),(function(){}))}})),s(this,"wqfv",(function(e,i,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=n.Tyog.getltCount(e);if(i=t(t({},i),{},{apx_lt_count:s}),n.FFWp)if(n.retainedDays(),n.Dnnw){var a=Se(e,re(i),r,n.getTime()),u="APP_EVENT";if(!n.AOQi.includes(e))if(n.LWMB.includes(e)&&(u="CLIENT_EVENT"),a){try{var c=a.name.replace("'","").replace("’","");if(n.iGSw.hasOwnProperty(c)){var l=n.iGSw[c];l+=1,n.iGSw[c]=l}else n.iGSw[c]=1;var d=le(n.siteId,JSON.stringify(n.iGSw));n.persistToStorage("_apx_lt_count",d)}catch(e){_e.error("LT Count object parsing failed ".concat(e))}n.vbnk(e,i),n.dispatchEvent(u,a,!1,o)}else _e.debug("logAppEvent: invalid Event ",e,i)}else _e.warn("Apxor SDK is not running");else Le.wqfv()})),s(this,"logClientEvent",(function(e,i){var r=n.Tyog.getltCount(e);if(i=t(t({},i),{},{apx_lt_count:r}),n.FFWp)if(n.Dnnw){var o=Se(e,re(i),null,n.getTime()),s="CLIENT_EVENT";n.AOQi.includes(e)||(n.qcWL.includes(e)&&(s="APP_EVENT"),o?(n.vbnk(e,i),n.dispatchEvent(s,o)):_e.debug("logClientEvent: invalid event ",e,i))}else _e.warn("Apxor SDK is not running");else Le.logClientEvent()})),s(this,"logPageView",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n.getTime();if(n.FFWp)if(n.Dnnw)if("string"==typeof e&&e&&e.length>0){var i=ne(t),r=xe(e,ee(n.window),0,i);n.Tyog.isStorageAvailable()&&n.annv.JOzo(e),U(n.OQnh)?(n.uict(),n.OQnh=r):n.OQnh=r,n.wqfv("APX_PAGE_OPENED",{time:H(new Date),navigation_id:e}),_e.debug("logPageView: page view is logged ",e)}else _e.warn("logPageView: pathname is empty ",e);else _e.warn("Apxor SDK is not running");else Le.logPageView()})),s(this,"setUserId",(function(e){n.FFWp?n.Dnnw?J(e)||n.setUserProperties({custom_user_id:e}):_e.warn("Apxor SDK is not running"):Le.setUserId()})),s(this,"setUserProperties",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(n.FFWp)if(n.Dnnw){if(Object.keys(e).length>0){n.Hmgx=t(t({},n.Hmgx),e);try{n.persistToStorage("_apx_ua",le(n.siteId,JSON.stringify(n.Hmgx)))}catch(e){}}}else _e.warn("Apxor SDK is not running");else Le.setUserProperties()})),s(this,"setSessionProperties",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n.FFWp?n.Dnnw?Object.keys(e).length>0&&(n.xYbV=t(t({},n.xYbV),e)):_e.warn("Apxor SDK is not running"):Le.setSessionProperties()})),s(this,"setAppVersion",(function(e){n.FFWp?n.Dnnw||_e.warn("Apxor SDK is not running"):Le.setAppVersion()})),s(this,"flattenJSON",(function(e){return re(e,2)})),s(this,"startNewSession",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();if(n.FFWp){if(!n.Dnnw){n.sessionId=Z(),n.pnCi=void 0===n.getFromStorage("apx_retained_session")||null===n.getFromStorage("apx_retained_session")?0:n.getFromStorage("apx_retained_session"),n.pnCi=Number(n.pnCi)+1,n.persistToStorage("apx_retained_session",n.pnCi),n.startTime=e;var t=n.jceS();n.QfgX.IYvE(),n.Tyog.OCsq(t),n.wemm=new De(n.config),console.log("Session Id: "+n.sessionId),n.persistToStorage("_apx_sId",n.sessionId),n.Dnnw=!0,n.brGG(),_e.debug("New session started")}}else Le.startSession()})),s(this,"brGG",(function(){try{var e=Apxor.getController().getFromStorage("qe_state"),t={};for(var i in U(e)&&(t=JSON.parse(de(n.siteId,e))),t)t[i].SESSION=0;Apxor.getController().persistToStorage("qe_state",t,!0),n.window.ApxorRTM.resetFrequencyCounts()}catch(e){console.log("Can't reset campaign limits:".concat(e))}})),s(this,"endSession",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(n.FFWp)if(n.Dnnw){e||n.uict();var i=t(t({},n.qgGE),{},{user_attributes:t({},n.Hmgx),session_attributes:t({},n.xYbV)}),r=n.LMkQ(i);n.persistToStorage("_apx_use",le(n.siteId,null)),n.OlwJ>0&&n.flVq>0?n.Tyog.LNwP(r,!1):n.LYBp(r,!1),n.Tyog.SlKT(),n.QfgX.IYvE(),U(n.wemm)&&n.RTfF&&n.wemm.uniM(),z(document),n.Dnnw=!1,_e.debug("Current session ended")}else _e.warn("Apxor SDK is not running. Please make sure to call 'startSession'");else Le.endSession()})),s(this,"getSessionId",(function(){return n.sessionId})),s(this,"qbhy",(function(){return n.FFWp?n.Dnnw?n._deviceId:(_e.warn("Apxor SDK is not running"),null):(Le.getClientId(),null)})),s(this,"registerForEvent",(function(e,t){n.WAiI.registerForEvent(e,t)})),s(this,"unregisterFromEvent",(function(e,t){n.WAiI.unregisterFromEvent(e,t)})),s(this,"getTime",(function(){return te(Date.now()-n.startTime)})),s(this,"FhCd",(function(e){n.axXW=e})),s(this,"sendChunkOnTimeBasis",(function(){var e=n.qgGE,t=e.app_events,i=e.navigation_events;t.length+i.length>0&&!n.axXW&&n.GbZE()})),s(this,"sendChunkIfNeeded",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=n.qgGE,i=t.app_events,r=t.navigation_events,o=i.length+r.length;(e||!n.eGkz&&o>0||n.eGkz&&o>=n.oGrt)&&n.GbZE()})),s(this,"GbZE",(function(){var e=n.LMkQ(n.qgGE);n.qgGE=t({},Te),n.persistToStorage("_apx_use",le(n.siteId,JSON.stringify(n.qgGE))),n.nwNH(e,!1)})),s(this,"dispatchEvent",(function(i,r){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_e.debug("Dispatching Event: ",i,o),n.zUEN();var a=n.qgGE.app_events;switch(i){case"APP_EVENT":n.qgGE=t(t({},n.qgGE),{},{app_events:[].concat(a,r)});break;case"CLIENT_EVENT":n.clientEvents.push(r)}if(n.WAiI.IFcf(i,r),"CLIENT_EVENT"!==i){if("APP_EVENT"===i){var u=Date.now(),c=n.getFromStorage("_apx_lEt");if(c=Number(c),n.persistToStorage("_apx_lEt",Date.now()),Y(c)&&c>0&&Math.round(te(u-c))>n.lwLZ)return e.getInstance().endSession(!0),void e.getInstance().startNewSession(Date.now())}var l=t(t({},n.qgGE),{},{user_attributes:t({},n.Hmgx),session_attributes:t({},n.xYbV)}),d=n.LMkQ(l,i);if(n.persistToStorage("_apx_use",le(n.siteId,JSON.stringify(l))),!0!==s)if(n.eGkz){if(a.length+1<n.oGrt)return;n.nwNH(d,o)}else o||"APP_EVENT"!==i||n.UlMO||n.nwNH(d,o);else n.CkzT()}})),s(this,"persistToStorage",(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t;i&&ie(r)&&(r=le(n.siteId,JSON.stringify(r))),n.Tyog.gUBE(e,r)})),s(this,"getFromStorage",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return n.Tyog.getItem(e,t)})),s(this,"NVfM",(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n.Tyog.ZYsm(e,t,i)})),s(this,"qXqF",(function(){return n.uuJo})),s(this,"IYRA",(function(){n.jceS()})),s(this,"getUserAttributes",(function(){return n.Hmgx})),s(this,"getSessionAttributes",(function(){return n.xYbV})),s(this,"makeGetRequest",(function(e,t,i){n._api.makeGetRequest(e,t,i)})),s(this,"fetchConfiguration",(function(e,t,i,r){n.Tyog.isStorageAvailable()&&n.annv.fetchConfiguration(e,t,i,r)})),s(this,"bKdE",(function(){var e=n.config,t=e.max_chunk_event_count,i=void 0===t?20:t,r=e.max_sessions_in_storage,o=void 0===r?-1:r;n.oGrt=U(i)&&Y(i)?i:20;var s=n.clientConfig,a=s.events_upload_time,u=s.retry_time,c=s.bulk_upload,l=void 0===c||c;n.eGkz=l,n.agHb=U(a)&&Y(a)&&a>=1e3?a:-1,n.OlwJ=U(u)&&Y(u)&&u>=1e3?u:-1,n.UlMO=a>0,n.dYLO=U(o)&&Y(o)&&o>0?o:-1})),s(this,"NPsi",(function(){var e=n.config.idle_time_out,t=n.getFromStorage(P("apx_")),i=te(n.startTime-Number(t));U(t)&&t>-1&&i>e?(n.Tyog.SlKT(),i=0):(!U(t)||t<1)&&(i=0),n.newSession&&(i=0);var r=n.uuJo;r.total_duration,r.duration})),s(this,"wtUx",(function(){var e=n.getFromStorage("_apx_ua",!0);if(U(e)){var i;_e.debug("Retrieved Stored User attributes");var r=ce(e);if(null===r)try{r=JSON.parse(de(n.siteId,e))}catch(e){r={}}n.Hmgx=t(t({},n.Hmgx),null!==(i=r)&&void 0!==i?i:{})}})),s(this,"hfPM",(function(e,t){var i=n.jceS(),r=n.NPsi();n.QfgX=new Pe(r),n.Tyog.OCsq(i),_e.debug("Session Id: "+n.sessionId),n.persistToStorage("_apx_sId",n.sessionId),n.Dnnw=!0,n.FFWp=!0;n.nuvP(e,!1,function(){var e=function(){n.isZk||(n.window.setTimeout((function(){!function(){if(n.WMZQ(),clearInterval(n.AxlI),n.AxlI=setInterval((function(){return n.sendChunkOnTimeBasis()}),n.rZWQ),n.UlMO)try{clearInterval(n.kiuN),n.kiuN=setInterval((function(){return n.sendChunkIfNeeded()}),n.agHb)}catch(e){}t()}()}),100),n.isZk=!0)};n.window.setTimeout((function(){var t=n.config.plugins;if(U(t)&&U(t.length)){Apxor.Afuk(!0);for(var i=!1,r=0;r<t.length;r++){var o=t[r];try{window[o].init(e),i=!0,_e.info("Initialized plugin: ",o)}catch(e){i=!1,_e.error(e),_e.error("Failed to initialize plugin: "+o)}}i||Apxor.Afuk(!1)}}),1e3)}.bind(n))})),s(this,"LAVB",(function(e,t,i){setTimeout((function(){try{n.ZXmh=(r=new Date).getDate()+"/"+r.getMonth()+"/"+r.getFullYear(),_e.info("Controller initializing with client config",n.clientConfig),n.newSession=!0,n.sessionId=Z(),n.bKdE(),n.WAiI=new ye,n.annv=new We,n.xEmt(),n.Mqym(),n.wtUx(),n.Rzwu=Ee(n.startTime),n.annv.initialize(n.config,n.siteId);n.BYVn(function(){n.hfPM(e,t)}.bind(n))}catch(e){_e.error("Failed to initialize SDK: ",e),n.FFWp=!1,i()}var r}),500)})),s(this,"zRuo",(function(){try{var e,t;n.Dnnw=!1,n.FFWp=!1,n.TGzU=!1,null===(e=n.WAiI)||void 0===e||e.Wmja(),null===(t=n.wemm)||void 0===t||t.uniM()}catch(e){}})),s(this,"LWNU",(function(e){var i,r,o;n.config=t(t({},e),n.clientConfig);var s=n.config,a=s.max_chunk_event_count,u=void 0===a?20:a,c=s.max_sessions_in_storage,l=void 0===c?-1:c,d=s.idle_time_out,f=void 0===d?1800:d,g=s.events,h=void 0===g?{}:g;n.oGrt=u,n.dYLO=U(l)&&Y(l)&&l>0?l:-1,n.lwLZ=Y(f)?f:1800,n.AOQi=null!==(i=h.stop)&&void 0!==i?i:[],n.LWMB=null!==(r=h.action)&&void 0!==r?r:[],n.qcWL=null!==(o=h.app)&&void 0!==o?o:[],_e.debug("Config updated")})),s(this,"jceS",(function(){var e,i=n.Tyog.PmqV(null!==(e=n.startTime)&&void 0!==e?e:Date.now(),n.sessionId,n.lwLZ),r=i.chunk;n.newSession=i.is_new_session;var o=r.session_info,s=r.app_info,a=r.sdk_info,u=r.chunk_details,c=r.chunk_meta;n.uuJo=o,n.Rzwu=a,n.pKvq=s,n.qgGE=u,n.tWZW(),n.YrWX=c.number,n.uuJo.is_first_session||(n.uuJo.is_first_session=n.VhuT);var l=u.session_attributes,d=u.user_attributes;n.Hmgx=t(t({},n.Hmgx),d),n.xYbV=t(t({},n.xYbV),l);var f=n.config.name;n.pKvq.app_name=U(f)?f:"";var g,h=n.config.domain;if(n.pKvq.bundle_id=U(h)?h:"",console.log("APP VERSION: "+n.clientConfig.version),U(n.clientConfig.version))g=""+n.clientConfig.version,n.Tyog.xvYp(g,n.config);else{var v=n.Tyog.rSvR();g=U(v)?v:"ALL"}if(n.pKvq.app_version=g,!i.is_new_session){var p=r.session_info.id,_=r.session_info.launch_time;n.sessionId=p,n.startTime=_}var m={id:n.sessionId+":"+n.YrWX,number:n.YrWX,reporting_times:[Date.now()]};return{sdk_info:n.Rzwu,session_info:n.uuJo,app_info:n.pKvq,device_info:n.LBMk,chunk_meta:m,chunk_details:n.qgGE}})),s(this,"jyxJ",(function(){var e=n.Rzwu.sdk_version,t={sdk_version:JSON.stringify(e),app_info:n.pKvq,device_info:n.LBMk,user_attributes:n.Hmgx},i=we(t),r=n.Tyog.ZYsm("_apx_uih","");i!==r&&n._api.Qjqd(t,(function(){n.persistToStorage("_apx_uih",i)}),(function(){}))})),s(this,"VGZY",(function(e){return""===e||n.Tyog.ZYsm("_apx_ch","")!==e})),s(this,"nuvP",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0;if(!t&&n.newSession&&n.jyxJ(),n.VGZY(e)){var r=n.config.sct_time,o=n.Tyog.ZYsm("_apx_lct",-1);if(r>0&&o>0){var s=Math.abs(Date.now()-o);if(s<r)return void(i&&i())}n.persistToStorage("_apx_lct",Date.now()),n._api.ZKdW((function(e){var t;_e.debug("Fetch new config"),n.Tyog.ofpX(e),n.persistToStorage("_apx_ch",null!==(t=e.hash)&&void 0!==t?t:we(e)),n.LWNU(e),n.xEmt(),i&&i()}),(function(e){0!==e&&_e.error("Failed to fetch config"),i&&i()}))}else i&&i()})),s(this,"WMZQ",(function(){var e=n.config;if(e.enable||U(e.details)&&e.details.enable){_e.debug("Monitoring started...");var t=be(n.window.document.visibilityState,n.getTime());n.dispatchEvent("SYSTEM_EVENT",t),n.logPageView(n.window.location.pathname,n.getTime()),n.newSession&&n.wqfv("apx_app_opened",{time:H(new Date(n.startTime))}),n.hGZl(),n.sendChunkIfNeeded(!0)}})),s(this,"BYVn",(function(e){var i=n.Tyog.rZyC();if(_e.debug("Checking for previous data:",i),n.qgGE=t({},Te),U(i)&&Array.isArray(i)&&i.length>0){n.persistToStorage("_apx_use",le(n.siteId,null)),_e.debug("Found old data");var r=[],o=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;0===t&&(r.length>0?(_e.debug("Failed to report previous data:"),n.Tyog.LNwP(r,!0)):(_e.debug("Removing transient data"),n.Tyog.lOip())),e&&e()};if(n.dYLO>0){var s=[];if(i.forEach((function(e){var t=e.session_info.launch_time;-1===s.indexOf(t)&&s.push(t)})),s.sort(),s.length>n.dYLO)for(var a=s.length-n.dYLO,c=function(e){var t=s[e];i.filter((function(e){return e.session_info.launch_time!==t}))},l=0;l<a;l++)c(l)}var d={};i.forEach((function(e){var t=e.session_info.id;if(d.hasOwnProperty(t)){var n=d[t];(n=n.concat(e)).sort((function(e,t){return e.chunk_meta.number-t.chunk_meta.number})),d[t]=n}else d[t]=[e]}));var f=[];Object.keys(d).forEach((function(e){if(d.hasOwnProperty(e)){var i=d[e],r=i[i.length-1];i.forEach((function(e){var n;e.chunk_meta.id!==r.chunk_meta.id&&(r.chunk_details=t(t({},r.chunk_details),{},{app_events:(n=[]).concat.apply(n,[e.chunk_details.app_events].concat(u(r.chunk_details.app_events))),system_events:[],navigation_events:[],user_events:[]}))}));var o=[];if(JSON.stringify(r).length>3145728){var s=r.chunk_details,a=s.app_events,c=s.user_events,l=1e5,g=n.ovlR();g.hasOwnProperty(e)&&(l=g[e]+1e5);var h=t(t({},r.chunk_meta),{},{id:r.session_info.id+":"+l,number:l}),v=t(t({},r.chunk_details),{},{app_events:[],user_events:[]}),p=t(t({},r),{},{chunk_meta:t({},h),chunk_details:t({},v)});if(o.push(p),l++,c.length>0){var _=[];n.JkOo(c,10240,_),n.upTb("user_events",r,o,l,_)}if(a.length>0){var m=[];n.JkOo(a,10240,m),n.upTb("app_events",r,o,l,m)}f.push.apply(f,o),n.YrWX=l,n.wpez(e,l)}else{var w=n.ovlR(),y=n.YrWX;w.hasOwnProperty(e)&&(y=w[e]),n.YrWX=y+1,n.wpez(e,n.YrWX),f.push(r),n.Tyog.OCsq(r)}}}));var g=f.length,h=g,v=0;!function e(){if(v<h){var t,i,s=f[v];if(U(s.app_info.app_name)||(s.app_info.app_name="",s.device_info.id=n.zUEN()),U(s.app_info.bundle_id)||(s.app_info.bundle_id="",s.device_info.id=n.zUEN()),(null===(t=s.chunk_details)||void 0===t||null===(i=t.app_events)||void 0===i?void 0:i.length)<1)return o(--g),v++,void e();n._api.MzsR(s,(function(){o(--g),v++,e()}),(function(t){0!==t&&(t>=500&&n.OlwJ>0?setTimeout((function(){e()}),n.OlwJ):(413!==t&&417!==t&&r.push(s),v++,e(),o(--g)))}))}}()}else{var p={};p[n.uuJo.id]=n.YrWX,n.persistToStorage("_apx_scnm",le(n.siteId,JSON.stringify(p))),e&&e()}})),s(this,"JkOo",(function(e,t,n){for(var i=0,r=e.length;i<r;){for(var o=[],s=0;s<t;){var a=e[i];if(!U(a))break;s+=JSON.stringify(a).length,o.push(a),i++}n.push(o)}})),s(this,"upTb",(function(e,n,i,r,o){o.forEach((function(o){var s=t(t({},n.chunk_meta),{},{id:n.session_info.id+":"+r,number:r}),a=t({},Te);a[e]=o;var u=t(t({},n),{},{chunk_meta:t({},s),chunk_details:t({},a)});i.push(u),r++}))})),s(this,"qgDQ",(function(){var e=!1;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){return null};V(t)&&(e.addEventListener("pagehide",(function(e){return t(e),""})),e.addEventListener("beforeunload",(function(e){return t(e),""})),e.addEventListener("onunload",(function(e){return t(e),""})))}(window,(function(t){if(_e.debug("Executing before unload",e,n.Dnnw),!e&&n.Dnnw){if(e=!0,_e.debug("Executing before unload"),"visible"===window.document.visibilityState){n.uict(!0);var i=be("hidden",n.getTime());n.dispatchEvent("SYSTEM_EVENT",i,!0)}clearInterval(n.kiuN),clearInterval(n.AxlI),n.eGkz&&n.persistToStorage("_apx_use",le(n.siteId,JSON.stringify(n.qgGE))),n.wemm.uniM()}}))})),s(this,"nwNH",(function(e){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n.TGzU||n.OlwJ>0&&-1!==n.flVq&&Date.now()-n.flVq<n.OlwJ){var r=t(t({},n.qgGE),{},{user_attributes:t({},n.Hmgx),session_attributes:t({},n.xYbV)});n.persistToStorage("_apx_use",le(n.siteId,JSON.stringify(r)))}else n.TGzU=!0,n.qgGE=t(t({},Te),{},{user_attributes:t({},n.Hmgx),session_attributes:t({},n.xYbV)}),n.YrWX+=1,n.wpez(n.uuJo.id,n.YrWX),n.persistToStorage("_apx_use",le(n.siteId,null)),n.LYBp(e,i)})),s(this,"LYBp",(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(U(e)&&U(e.chunk_details)){var i=e.chunk_details,r=i.app_events,o=i.system_events,s=i.navigation_events,a=i.user_events;r.length<1&&o.length<1&&s.length<1&&a.length<1?n.TGzU=!1:(n.persistToStorage("_apx_ua",le(n.siteId,JSON.stringify(n.Hmgx))),n.Tyog.OCsq(e),U(e.app_info.app_name)||(e.app_info.app_name="",e.device_info.id=n.zUEN()),U(e.app_info.bundle_id)||(e.app_info.bundle_id="",e.device_info.id=n.zUEN()),t?(n.TGzU=!1,n.Tyog.LNwP(e)):n._api.MzsR(e,(function(){n.TGzU=!1,n.flVq=-1,n.tWZW()}),(function(t){0!==t&&(n.TGzU=!1,t>=500&&(n.flVq=Date.now()),413!==t&&417!==t&&n.Tyog.LNwP(e))})))}else n.TGzU=!1})),s(this,"tWZW",(function(){var e=n.getFromStorage("_apx_use",!0);U(e)&&(n.qgGE=t(t({},n.qgGE),e),n.persistToStorage("_apx_use",le(n.siteId,null)))})),s(this,"ovlR",(function(){var e=n.getFromStorage("_apx_scnm",!0);return U(e)||(e={}),e})),s(this,"wpez",(function(e,t){var i=n.ovlR();i[e]=t,n.persistToStorage("_apx_scnm",le(n.siteId,JSON.stringify(i)))})),s(this,"zUEN",(function(){var e=n.clientConfig.client_id,i=n.Tyog.MPVl("apx_");if(!U(i)){U(e)&&""!==e?i=e:(i=Z(),_e.debug("New device Found")),n.Tyog.ToAb(n.config),n.Tyog.xHPu(i,n.config),n.Tyog.iejo(n.startTime,n.config);n.uuJo=t(t({},n.uuJo),{is_first_session:!0}),n.VhuT=!0}return _e.debug("Device Id: ",i),i})),s(this,"Mqym",(function(){n._deviceId=n.zUEN();var e=Q(n.window),i=e.device,r=e.os,o=e.browser_version,s=e.browser,a=e.dimensions,u=e.dpi,c=e.dimensions_in_pixels;n.LBMk=function(e,t,n,i,r,o){return{id:e,hardware_model:t,dimensions:n,os_version:i,platform:"web",dpi:r,dimensions_in_pixels:o}}(n._deviceId,i,a,r,u,c),n.PEMu(t(t({},n.LBMk),{},{browser:s,browser_version:o}))})),s(this,"PEMu",(function(e){var i=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.navigator,r=(i=void 0===i?{}:i).language,o=n.browser_version,a=n.browser,u=C.isCookieAvailable();return s(e={},"apx_browser",a),s(e,"apx_browser_version",a+"_"+o),s(e,"apx_language",r),s(e,"apx_cookies_supported",u),e}(n.window,e);n.Hmgx=t(t({},n.Hmgx),i);var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.navigator,n=(t=void 0===t?{}:t).connection,i=(n=void 0===n?{}:n).effectiveType,r=n.saveData,o=t.platform,s=t.webdriver,a=e.document.referrer,u={};i&&(u.apx_network=i),r&&(u.apx_data_save_mode=r),o&&(u.apx_platform=o),U(s)&&s&&(u.apx_automation=s),U(a)&&a.length>0?u.apx_referrer=a:u.apx_referrer="direct";var c=K();return u.apx_device_type=c,u}(n.window);n.xYbV=t(t({},n.xYbV),r)})),s(this,"hGZl",(function(){!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(null!=t&&V(t)){var n=e.document;"loading"!==n.readyState?t():V(n.addEventListener)?n.addEventListener("DOMContentLoaded",t):V(e.attachEvent)&&e.attachEvent("onreadystatechange",(function(e){"loading"!==n.readyState&&t(e)}))}}(n.window,(function(){n.RTfF||(n.qgDQ(),n.wemm=new De(!1),n.RTfF=!0)}))})),s(this,"xEmt",(function(){var e=n.config,t=e.name,i=void 0===t?"":t,r=e.domain,o=void 0===r?n.window.location.host:r,s=n.Tyog.qMkC(n.startTime),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.location,n=(t=void 0===t?{}:t).protocol,i=t.host,r=t.hostName;return"file:"===n||"localhost"===i||"0.0.0.0"===r||"127.0.0.1"===r?"development":"production"}(n.window),u=U(n.clientConfig.version)?""+n.clientConfig.version:n.Tyog.rSvR(),c=i;""===i&&"Unknown"===(c=ee(n.window))&&(c=""),n.pKvq=function(e,t,n,i,r){return{app_name:e,app_version:r=U(r)?r:"ALL",bundle_id:t,installation_time:n,app_mode:i}}(c,o,s,a,u)})),s(this,"uict",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];U(n.OQnh)&&(n.OQnh.duration=ne(n.getTime()-n.OQnh.transition_time),n.dispatchEvent("NAVIGATION_EVENT",t({},n.OQnh),e))})),s(this,"pFfa",(function(){n.uict(),n.OQnh=null})),s(this,"LMkQ",(function(e){n.CRHr();var i={id:n.sessionId+":"+n.YrWX,number:n.YrWX,reporting_times:[Date.now()]};return e=t(t({},e),{},{user_attributes:n.Hmgx,session_attributes:n.xYbV}),{sdk_info:n.Rzwu,session_info:n.uuJo,app_info:n.pKvq,device_info:n.LBMk,chunk_meta:i,chunk_details:e}})),s(this,"CRHr",(function(){var e=n.getTime(),i=e;e-=n.QfgX.xcHe(),n.uuJo=t(t({},n.uuJo),{},{duration:ne(e),total_duration:ne(i)})})),s(this,"getEventCount",(function(e){var t=-1;return n.clientEvents.forEach((function(n){n.name===e&&(t+=1)})),-1===t?n.annv.getEventCount(e):t})),s(this,"getSiteId",(function(){return n.siteId})),s(this,"setRedirectionHandler",(function(e){n.FFWp?(n.PsHe||n.registerForEvent("CLIENT_EVENT",n.xJfj),n.PsHe=e):Le.setRedirectionHandler()})),s(this,"xJfj",(function(e){e&&"REDIRECT"===e.name&&(n.PsHe?n.PsHe(e.additional_info.url):_e.warn("No redirection handler registered"))})),s(this,"makePostRequest",(function(e,t,i,r,o){n._api.makePostRequest(e,t,i,r,o)})),s(this,"getDevInfo",(function(){return n.LBMk})),s(this,"getLoggedEventsList",(function(){return n.OCej})),s(this,"vbnk",(function(e,i){var r=n.OCej;r[e]=r[e]||{},r[e]=t(t({},r[e]),i)})),s(this,"getSDKStartDate",(function(){return n.ZXmh})),e.instance||(e.instance=this),e.instance}return o(e,[{key:"retainedDays",value:function(){var e=this.getFromStorage(N("apx_")),t=Math.abs(e-this.startTime)/36e5,n=Math.floor(t/24);this.persistToStorage("apx_retained_days",n)}}],[{key:"getInstance",value:function(){return e.instance||(e.instance=new e),e.instance}}]),e}();s(Ue,"instance",void 0);var Ve=o((function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:X();i(this,e),s(this,"FFWp",!1),s(this,"sphb",[]),s(this,"version",176),s(this,"tFOp",(function(){Array.isArray(n._q)&&n._q.forEach((function(e){var t=e.m,i=e.args;n.hasOwnProperty(t)&&V(n[t])&&n[t].apply(n,Array.from(i))}))})),s(this,"init",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;try{if(!n.FFWp){var o,s,a,u;U(t)&&(!U(t)||t instanceof Object)||(t=d);var c=t,l=c.honorDNT,f=void 0!==l&&l,g=c.debug,h=void 0!==g&&g,v=c.events_upload_time,p=void 0===v?-1:v,_=c.retry_time,m=void 0===_?-1:_,w=c.level,y=void 0===w?"error":w;if(null!==(o=n.window)&&void 0!==o&&null!==(s=o.localStorage)&&void 0!==s&&s.getItem("apx_debug")&&(h=n.window.localStorage.getItem("apx_debug")),null!==(a=n.window)&&void 0!==a&&null!==(u=a.localStorage)&&void 0!==u&&u.getItem("apx_log")&&(y=n.window.localStorage.getItem("apx_log")),n.BzgY(h,y),!U(e)||!U(e.trim)||""===e.trim())return _e.error("ApxorSDK couldn't be initialized: Invalid Site Id"),n._controller=Le,void(null!=r&&V(r)&&r());if(f&&!$(n.window))return n._controller=Le,null!=r&&V(r)&&r(),void _e.error("Tracking is disabled, ApxorSDK couldn't be initialized");n._controller=Ue.getInstance(),U(p)&&p>0&&(t.events_upload_time*=1e3),U(m)&&m>0&&(t.retry_time*=1e3),n._controller.initialize(e,n._startTime,t,n.window,(function(){n.sphb.forEach((function(e){var t=e.m,i=e.args;n._controller[t].apply(n._controller,Array.from(i))})),n.FFWp=!0,null!=i&&V(i)&&(_e.debug("CLIENT_ID: "+n.getClientId()),i({client_id:n.getClientId(),session_id:n.getSessionId()})),n.window.console.info("ApxorSDK initialized for "+e+" with SDK version: 176")}),(function(){_e.error("Failed to initialize Apxor SDK"),r&&V(r)&&r("")}))}}catch(e){_e.error("Failed to initialize Apxor SDK",e),r&&V(r)&&r(e)}})),s(this,"BzgY",(function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error";_e.enabled=e,_e.level=t,_e.console=n.window.console})),s(this,"logEvent",(function(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];n.FFWp?n._controller.wqfv(e,t,void 0,i):n.sphb.push({m:"wqfv",args:[e,t]})})),s(this,"logClientEvent",(function(e,t){n.FFWp?n._controller.logClientEvent(e,t):n.sphb.push({m:"logClientEvent",args:[e,t]})})),s(this,"logPageView",(function(e){n.FFWp?n._controller.logPageView(e):n.sphb.push({m:"logPageView",args:[e]})})),s(this,"setUserId",(function(e){n.FFWp?n._controller.setUserId(e):n.sphb.push({m:"setUserId",args:[e]})})),s(this,"setUserProperties",(function(e){n.FFWp?n._controller.setUserProperties(e):n.sphb.push({m:"setUserProperties",args:[e]})})),s(this,"setSessionProperties",(function(e){n.FFWp?n._controller.setSessionProperties(e):n.sphb.push({m:"setSessionProperties",args:[e]})})),s(this,"setAppVersion",(function(e){n.FFWp?n._controller.setAppVersion(e):n.sphb.push({m:"setAppVersion",args:[e]})})),s(this,"flattenJSON",(function(e){n.FFWp?n._controller.flattenJSON(e):n.sphb.push({m:"flattenJSON",args:[e]})})),s(this,"getSessionId",(function(){return n.FFWp?n._controller.getSessionId():null})),s(this,"getClientId",(function(){return n.FFWp?n._controller.qbhy():null})),s(this,"startNewSession",(function(){n.FFWp?n._controller.startNewSession(Date.now()):n.sphb.push({m:"startNewSession",args:[]})})),s(this,"endSession",(function(){n.FFWp?n._controller.endSession():n.sphb.push({m:"endSession",args:[]})})),s(this,"getController",(function(){return n.FFWp?n._controller:null})),s(this,"getSiteId",(function(){return n.FFWp?n._controller.getSiteId():null})),s(this,"setRedirectionHandler",(function(e){V(e)?n.FFWp?n._controller.setRedirectionHandler(e):n.sphb.push({m:"setRedirectionHandler",args:[e]}):_e.error("Callback must be a function")})),s(this,"Afuk",(function(e){n.FFWp=e})),this.window=t,this._startTime=r,this.tFOp()}));window.Apxor=window.Apxor||{_q:[],_st:new Date},Ve.prototype._q=window.Apxor._q;var Ge=new Ve(window,+window.Apxor._st);window.Apxor=Ge,window.ApxorLogger=_e;try{void 0===exports&&null===exports||(exports.default=Ge,module.exports=exports.default)}catch(e){}return Ge}));
